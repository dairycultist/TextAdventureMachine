<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>TextAdventureMachine</title>
    <script type="module">

        let scenes = {};
        
        fetch("stories/jennyvillage/index.txt")
        .then(file => file.text())
        .then(text => {

            const regex = /\((\w+) ([./\w]+)\) ?{([^{}]*)}/g;
            let match;
            
            while ((match = regex.exec(text)) !== null) {
                
                scenes[match[1]] = `<img src="${match[2]}">${match[3]}`;
            }

            setScene("INDEX");
        });

        function setScene(key) {

            document.getElementById("insert").innerHTML = scenes[key];
        }
    </script>
    <style>
        img { width: 100%; display: block; margin: 1em 0; }
    </style>
</head>
<body>
    <div id="insert">
        
    </div>
</body>
</html>
